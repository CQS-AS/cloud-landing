var client;client=angular.module("client",["ngResource","ctrl.calculator","ctrl.invite","dir.moreless","dir.nav.collapse","dir.popover","dir.scroller","dir.scrollto","srv.api","srv.mail"]),client.config(["$locationProvider",function(r){return r.html5Mode(!1)}]);
angular.module("ctrl.calculator",[]).controller("ctrlCalculator",["$scope",function(t){var a,s;return t.calc={users:10,files:100},t.total={plan:0,users:{inc:0,add:0},cost:{plan:0,add:0},year:0,month:0,store:{inc:0,add:0,extra:0}},a={fileGB:.05,userGB:5,storeGB:5,userCost:600,storeCost:50,singleCost:1200,officeCost:3e3},s=function(){var s;return t.calc.users>0?(t.total.plan=1===t.calc.users?0:1,t.total.users.inc=1===t.calc.users?1:5,t.total.users.add=Math.max(0,t.calc.users-t.total.users.inc),t.total.cost.plan=1===t.calc.users?a.singleCost:a.officeCost,t.total.cost.add=t.total.users.add*a.userCost,t.total.year=t.total.cost.plan+t.total.cost.add,t.total.store.inc=1*a.userGB*t.total.users.inc,t.total.store.add=1*a.userGB*t.total.users.add,s=t.calc.files*a.fileGB,t.total.store.extra=Math.ceil(Math.max(0,(s-(t.total.store.inc+t.total.store.add))/a.storeGB)),t.total.month=t.total.store.extra*a.storeCost):void 0},t.$watch("calc.users",s),t.$watch("calc.files",s),this}]);
angular.module("ctrl.invite",[]).controller("ctrlInvite",["$scope","srvMail",function(e,r){return e.busy=r.isBusy,e.done=!1,e.error=null,e.req={employees:"11-25 employees",cwt:"No",country:"South Africa",tandc:!1},e.request=function(){return r.requestInvite(e.req,function(r){return r?(console.log(r),e.error=error):e.done=!0})},this}]);
angular.module("dir.moreless",[]).directive("dirMoreless",function(){return function(){}});
angular.module("dir.nav.collapse",[]).directive("dirNavCollapse",function(){return function(o,l){$(window).scroll(function(){return l.offset().top>50?l.addClass("top-nav-collapse"):l.removeClass("top-nav-collapse")})}});
angular.module("dir.popover",[]).directive("dirPopover",function(){return function(e,r){r.popover({trigger:"hover",placement:"auto left"})}});
angular.module("dir.scroller",[]).directive("dirScroller",["$timeout",function(e){var l;return l=new Showdown.converter,{restrict:"A",link:function(r,d,s){var i,n,a,c,o,t,u;for(u=JSON.parse(s.dirScroller),o=0,t=u.length;t>o;o++)c=u[o],d.append(l.makeHtml(c));return i=d.children(),i.addClass("hidden"),n=-1,a=function(){-1!==n&&(i.slice(n,n+1).addClass("pullUpFade"),i.slice(n,n+1).removeClass("pullUp")),++n===i.length&&(n=0),i.slice(n,n+1).addClass("pullUp"),i.slice(n,n+1).removeClass("hidden"),i.slice(n,n+1).removeClass("pullUpFade"),e(a,3e3)},a()}}}]);
angular.module("dir.scrollto",[]).directive("dirScrollTo",["$timeout",function(e){var t,n;return t=function(){return window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},n=function(n,a){e(function(){var e,o,r,c,u,i,f,l,s,d,b,v,k,I,m,O;I=t(),O=0,b=void 0,v=void 0,a||(a={}),u=a.duration||800,d=a.offset||0,i=a.easing||"easeInOutQuart",r=a.callbackBefore||function(){},o=a.callbackAfter||function(){},f=function(e,t){return"easeInQuad"===e?t*t:"easeOutQuad"===e?t*(2-t):"easeInOutQuad"===e?.5>t?2*t*t:-1+(4-2*t)*t:"easeInCubic"===e?t*t*t:"easeOutCubic"===e?--t*t*t+1:"easeInOutCubic"===e?.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1:"easeInQuart"===e?t*t*t*t:"easeOutQuart"===e?1- --t*t*t*t:"easeInOutQuart"===e?.5>t?8*t*t*t*t:1-8*--t*t*t*t:"easeInQuint"===e?t*t*t*t*t:"easeOutQuint"===e?1+--t*t*t*t*t:"easeInOutQuint"===e?.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t:t},s=function(e){var t;if(t=0,e.offsetParent)for(;;)if(t+=e.offsetTop,e=e.offsetParent,!e)break;return t=Math.max(t-d,0)},l=s(n),c=l-I,m=function(){var e;e=t(),(v===l||e===l||window.innerHeight+e>=document.body.scrollHeight)&&(clearInterval(k),o(n))},e=function(){O+=16,b=O/u,b=b>1?1:b,v=I+c*f(i,b),window.scrollTo(0,v),m()},r(n),k=setInterval(e,16)})},{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(e,t,a){t.on("click",function(t){var o,r,c;return(c=document.getElementById(a.dirScrollTo))?(t.preventDefault(),r=function(t){var n;a.callbackBefore&&(n=e.callbackBefore({element:t}),"function"==typeof n&&n(t))},o=function(t){var n;a.callbackAfter&&(n=e.callbackAfter({element:t}),"function"==typeof n&&n(t))},n(c,{duration:a.duration,offset:a.offset,easing:a.easing,callbackBefore:r,callbackAfter:o}),!1):void 0})}}}]);
angular.module("srv.api",[]).service("srvApi",function(){var n,r;return n=0,this.isBusy=function(){return 0!==n},r=this.setBusy=function(r){return r?n++:n--},this.okCb=function(n,t){return function(i){return"function"==typeof n&&n(null,i.res),t?void 0:r(!1)}},this.errCb=function(n,t){return function(i){return console.error("srvApi.errCb",i),"function"==typeof n&&n(i),t?void 0:r(!1)}},this});
angular.module("srv.mail",[]).service("srvMail",["$resource","srvApi",function(s,i){return this.isBusy=i.isBusy,this.requestInvite=function(e,r){return s("/api/1/invite").save(e,i.okCb(r),i.errCb(r)),i.setBusy(!0)},this}]);